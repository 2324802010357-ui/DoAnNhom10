<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Fashion Store</title>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/site.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @Html.ActionLink("Fashion Store", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
            </div>

            <div class="collapse navbar-collapse" id="navbar-collapse">
                <!-- Menu trái -->
                <ul class="nav navbar-nav">
                    <li class="nav-item">
                        @Html.ActionLink("Trang chủ", "Index", "Home", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Sản phẩm", "Index", "Products", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item cart-nav-item">
                        <a href="@Url.Action("Index", "Cart")" class="nav-link cart-link">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-text">Giỏ hàng</span>
                            <span class="cart-badge">
                                @{
                                    var cartCount = 0;
                                    if (Session["CART"] != null)
                                    {
                                        var cart = Session["CART"] as List<DoAnNhom10.Models.CartItem>;
                                        cartCount = cart != null ? cart.Sum(x => x.Quantity) : 0;
                                    }
                                }
                                @cartCount
                            </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Liên hệ", "Contact", "Home", new { area = "" }, new { @class = "nav-link" })
                    </li>
                </ul>

                <!-- Menu phải -->
                <ul class="nav navbar-nav navbar-right">
                    @if (Session["USER"] == null)
                    {
                        <li class="nav-item">
                            <a href="@Url.Action("Login", "Account")" class="nav-link login-link">
                                <i class="fas fa-sign-in-alt"></i>
                                <span class="nav-text">Đăng nhập</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="@Url.Action("Register", "Account")" class="btn btn-success navbar-btn register-btn">
                                <i class="fas fa-user-plus"></i>
                                <span class="btn-text">Đăng ký</span>
                            </a>
                        </li>
                    }
                    else
                    {
                        var user = Session["USER"] as DoAnNhom10.Models.User;
                        <li class="nav-item dropdown user-dropdown">
                            <a href="#" class="dropdown-toggle nav-link user-link" data-toggle="dropdown">
                                <div class="user-avatar">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <span class="user-name">@user.FullName</span>
                                <i class="fas fa-chevron-down dropdown-arrow"></i>
                            </a>
                            <ul class="dropdown-menu user-menu">
                                <li class="dropdown-header">
                                    <div class="user-info">
                                        <i class="fas fa-user-circle fa-2x"></i>
                                        <div>
                                            <div class="user-full-name">@user.FullName</div>
                                            <div class="user-email">@user.Email</div>
                                        </div>
                                    </div>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="#">
                                        <i class="fas fa-user"></i>
                                        <span>Thông tin cá nhân</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="fas fa-shopping-bag"></i>
                                        <span>Đơn hàng của tôi</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="fas fa-heart"></i>
                                        <span>Sản phẩm yêu thích</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="fas fa-cog"></i>
                                        <span>Cài đặt</span>
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    @Html.ActionLink("Đăng xuất", "Logout", "Account", new { area = "" }, new { @class = "logout-link" })
                                </li>
                            </ul>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </nav>

    <div class="container body-content" style="padding-top:80px">
        @RenderBody()
    </div>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h4><i class="fas fa-tshirt"></i> Fashion Store</h4>
                    <p>Thời trang hiện đại, chất lượng cao với giá cả hợp lý. Khám phá bộ sưu tập độc đáo của chúng tôi.</p>
                </div>
                <div class="col-md-4">
                    <h4>Liên hệ</h4>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Đường ABC, Quận XYZ, TP.HCM</p>
                    <p><i class="fas fa-phone"></i> (028) 1234 5678</p>
                    <p><i class="fas fa-envelope"></i> info@fashionstore.com</p>
                </div>
                <div class="col-md-4">
                    <h4>Theo dõi chúng tôi</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
            </div>
            <hr style="border-color: rgba(255,255,255,0.3);">
            <p class="text-center">&copy; @DateTime.Now.Year - Fashion Store. Tất cả quyền được bảo lưu.</p>
        </div>
    </footer>

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    @RenderSection("scripts", required: false)

    <script>
    $(document).ready(function() {
        // Cart badge animation when updated
        var cartBadge = $('.cart-badge');
        if (cartBadge.text() > 0) {
            cartBadge.addClass('cart-badge-active');
        }

        // User dropdown enhancements
        $('.user-dropdown').on('show.bs.dropdown', function () {
            $(this).find('.dropdown-arrow').addClass('rotated');
        });

        $('.user-dropdown').on('hide.bs.dropdown', function () {
            $(this).find('.dropdown-arrow').removeClass('rotated');
        });

        // Mobile menu enhancements
        $('.navbar-toggle').on('click', function() {
            $(this).toggleClass('active');
        });
    });
    </script>
</body>
</html>
